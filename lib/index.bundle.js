(()=>{"use strict";var e={206:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeStorageTransport=void 0,t.detectEnvironment=i,t.createDragonLogger=s,t.generateRequestId=a,t.generateCorrelationId=function(){return a()},t.getDefaultLogger=function(e){return l||(l=s({component:"dragon-extension",enableStorage:!0,maxStorageEntries:1e3,...e})),l},t.setDefaultLogger=function(e){l=e};const o=n(r(874));function i(){let e,t="unknown";return"undefined"!=typeof navigator&&(navigator.userAgent.includes("Chrome")?t="chrome":navigator.userAgent.includes("Firefox")?t="firefox":navigator.userAgent.includes("Safari")&&(t="safari")),e="undefined"!=typeof self&&"undefined"==typeof window&&"undefined"!=typeof chrome?"service_worker":"undefined"!=typeof chrome&&chrome.tabs?"background":"undefined"!=typeof window&&"chrome-extension:"===window.location?.protocol?"popup":"content",{isExtension:!0,isDevelopment:!0,browser:t,extensionContext:e||void 0}}function s(e={}){const t=i(),r={level:e.level||(t.isDevelopment?"debug":"info"),browser:{asObject:!0,serialize:!0},timestamp:o.default.stdTimeFunctions.isoTime,formatters:{level:e=>({level:e})},serializers:{error:o.default.stdSerializers.err},...e},n=(0,o.default)(r),s=Object.create(n);return Object.setPrototypeOf(s,n),s.withContext=function(e){const t=n.child(e);return Object.assign(Object.create(t),s,{child:t.child.bind(t)})},s.forComponent=function(e){return this.withContext({component:e})},s.extensionEvent=function(e){const t={eventType:e.type,eventSource:e.source,...e.context,...e.data};switch(e.type){case"error":this.error(t,`Extension event: ${e.type}`);break;case"performance":this.info(t,`Extension event: ${e.type}`);break;default:this.debug(t,`Extension event: ${e.type}`)}},s.startTimer=function(e){const t=Date.now();return{end:(r,n)=>{const o=Date.now()-t,i=r||`Operation ${e||"completed"}`;this.info({operation:e,duration:o,...n},i)}}},t.isExtension&&e.enableStorage&&(s.getStoredLogs=async function(e){if(!chrome.storage?.local)return[];try{let t=(await chrome.storage.local.get(["dragonLogs"])).dragonLogs||[];return e&&(t=function(e,t){return e.filter((e=>{if(t.level&&!(Array.isArray(t.level)?t.level:[t.level]).includes(e.level))return!1;if(t.timeRange){const r=new Date(e.timestamp);if(r<t.timeRange.start||r>t.timeRange.end)return!1}return!(t.component&&e.context?.component!==t.component||t.requestId&&e.context?.requestId!==t.requestId||t.userId&&e.context?.userId!==t.userId||t.messageContains&&!e.message.includes(t.messageContains))})).slice(t.offset||0,(t.offset||0)+(t.limit||100))}(t,e)),t}catch(e){return this.error({error:e},"Failed to retrieve stored logs"),[]}},s.clearStoredLogs=async function(){if(chrome.storage?.local)try{await chrome.storage.local.remove(["dragonLogs"]),this.info("Stored logs cleared")}catch(e){this.error({error:e},"Failed to clear stored logs")}}),s}function a(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxx-xxxx-xxxx".replace(/[x]/g,(()=>(16*Math.random()|0).toString(16)))}t.ChromeStorageTransport=class{constructor(e=1e3){this.maxEntries=e}async write(e,t,r){if(!chrome.storage?.local)return;const n={id:crypto.randomUUID(),timestamp:(new Date).toISOString(),level:e,message:t,...r&&{context:r}};try{let e=(await chrome.storage.local.get(["dragonLogs"])).dragonLogs||[];e.unshift(n),e.length>this.maxEntries&&(e=e.slice(0,this.maxEntries)),await chrome.storage.local.set({dragonLogs:e})}catch(e){console.error("Failed to store log entry:",e)}}};let l=null},229:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeStorageTransport=t.setDefaultLogger=t.detectEnvironment=t.generateCorrelationId=t.generateRequestId=t.log=void 0,t.createLogger=function(e){return(0,i.createDragonLogger)(e)},t.getLogger=s,t.withContext=function(e,t){return(0,i.getDefaultLogger)(t).withContext(e)},t.forComponent=function(e,t){return(0,i.getDefaultLogger)(t).forComponent(e)},t.createDevLogger=function(e){const t=(0,i.detectEnvironment)();return(0,i.createDragonLogger)({level:"trace",...e&&{component:e},environment:"development",...t.isExtension?{}:{transport:{target:"pino-pretty",options:{colorize:!0,translateTime:"SYS:standard",ignore:"pid,hostname"}}}})},t.createProdLogger=function(e){return(0,i.createDragonLogger)({level:"info",...e&&{component:e},environment:"production",enableStorage:!1,redact:["password","token","apiKey","secret"]})},t.withCorrelation=function(e,t){return e({correlationId:(0,i.generateCorrelationId)(),requestId:(0,i.generateRequestId)(),...t})},t.timer=function(e,t){const r=(0,i.getDefaultLogger)().startTimer(e);return e=>{r.end(e,t)}},t.logExtensionEvent=function(e,t,r){const n=(0,i.detectEnvironment)();(0,i.getDefaultLogger)().extensionEvent({type:e,source:n.extensionContext||"unknown",data:t,context:r})},o(r(696),t),o(r(206),t);const i=r(206);function s(e){return(0,i.getDefaultLogger)(e)}Object.defineProperty(t,"setDefaultLogger",{enumerable:!0,get:function(){return i.setDefaultLogger}}),Object.defineProperty(t,"detectEnvironment",{enumerable:!0,get:function(){return i.detectEnvironment}}),Object.defineProperty(t,"generateRequestId",{enumerable:!0,get:function(){return i.generateRequestId}}),Object.defineProperty(t,"generateCorrelationId",{enumerable:!0,get:function(){return i.generateCorrelationId}}),Object.defineProperty(t,"ChromeStorageTransport",{enumerable:!0,get:function(){return i.ChromeStorageTransport}}),t.log={trace:(e,t)=>{(0,i.getDefaultLogger)().trace(t,e)},debug:(e,t)=>{(0,i.getDefaultLogger)().debug(t,e)},info:(e,t)=>{(0,i.getDefaultLogger)().info(t,e)},warn:(e,t)=>{(0,i.getDefaultLogger)().warn(t,e)},error:(e,t,r)=>{(0,i.getDefaultLogger)().error({...r,error:t},e)},fatal:(e,t,r)=>{(0,i.getDefaultLogger)().fatal({...r,error:t},e)}},t.default=s},696:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.TRACE=10]="TRACE",e[e.DEBUG=20]="DEBUG",e[e.INFO=30]="INFO",e[e.WARN=40]="WARN",e[e.ERROR=50]="ERROR",e[e.FATAL=60]="FATAL"}(r||(t.LogLevel=r={}))},793:e=>{function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var o=n&&n.stringify||t;if("object"==typeof e&&null!==e){var i=r.length+1;if(1===i)return e;var s=new Array(i);s[0]=o(e);for(var a=1;a<i;a++)s[a]=o(r[a]);return s.join(" ")}if("string"!=typeof e)return e;var l=r.length;if(0===l)return e;for(var c="",u=0,g=-1,f=e&&e.length||0,d=0;d<f;){if(37===e.charCodeAt(d)&&d+1<f){switch(g=g>-1?g:0,e.charCodeAt(d+1)){case 100:case 102:if(u>=l)break;if(null==r[u])break;g<d&&(c+=e.slice(g,d)),c+=Number(r[u]),g=d+2,d++;break;case 105:if(u>=l)break;if(null==r[u])break;g<d&&(c+=e.slice(g,d)),c+=Math.floor(Number(r[u])),g=d+2,d++;break;case 79:case 111:case 106:if(u>=l)break;if(void 0===r[u])break;g<d&&(c+=e.slice(g,d));var v=typeof r[u];if("string"===v){c+="'"+r[u]+"'",g=d+2,d++;break}if("function"===v){c+=r[u].name||"<anonymous>",g=d+2,d++;break}c+=o(r[u]),g=d+2,d++;break;case 115:if(u>=l)break;g<d&&(c+=e.slice(g,d)),c+=String(r[u]),g=d+2,d++;break;case 37:g<d&&(c+=e.slice(g,d)),c+="%",g=d+2,d++,u--}++u}++d}return-1===g?e:(g<f&&(c+=e.slice(g)),c)}},874:(e,t,r)=>{const n=r(793);e.exports=g;const o=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},i={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:b,res:b,err:p,errWithCause:p};function s(e,t){return"silent"===e?1/0:t.levels.values[e]}const a=Symbol("pino.logFuncs"),l=Symbol("pino.hierarchy"),c={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function u(e,t){const r={logger:t,parent:e[l]};t[l]=r}function g(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||o;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let l=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);const p=Object.keys(e.customLevels||{}),b=["error","fatal","warn","info","debug","trace"].concat(p);"function"==typeof r&&b.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");const h=e.level||"info",w=Object.create(r);w.log||(w.log=y),function(e,t,r){const n={};t.forEach((e=>{n[e]=r[e]?r[e]:o[e]||o[c[e]||"log"]||y})),e[a]=n}(w,b,r),u({},w),Object.defineProperty(w,"levelVal",{get:function(){return s(this.level,this)}}),Object.defineProperty(w,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,f(this,O,w,"error"),f(this,O,w,"fatal"),f(this,O,w,"warn"),f(this,O,w,"info"),f(this,O,w,"debug"),f(this,O,w,"trace"),p.forEach((e=>{f(this,O,w,e)}))}});const O={transmit:t,serialize:i,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:b,timestamp:m(e)};return w.levels=function(e){const t=e.customLevels||{};return{values:Object.assign({},g.levels.values,t),labels:Object.assign({},g.levels.labels,function(e){const t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}(t))}}(e),w.level=h,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=y,w.serializers=n,w._serialize=i,w._stdErrSerialize=l,w.child=function(r,o){if(!r)throw new Error("missing bindings for child Pino");o=o||{},i&&r.serializers&&(o.serializers=r.serializers);const s=o.serializers;if(i&&s){var a=Object.assign({},n,s),l=!0===e.browser.serialize?Object.keys(a):i;delete r.serializers,d([r],l,a,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.bindings=r,a&&(this.serializers=a,this._serialize=l),t&&(this._logEvent=v([].concat(e._logEvent.bindings,r)))}c.prototype=this;const g=new c(this);return u(this,g),g.level=this.level,g},t&&(w._logEvent=v()),w}function f(e,t,r,i){if(Object.defineProperty(e,i,{value:s(e.level,r)>s(i,r)?y:r[a][i],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[i]===y)return;e[i]=function(e,t,r,i){return l=e[a][i],function(){const a=t.timestamp(),c=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===o?o:this;for(var g=0;g<c.length;g++)c[g]=arguments[g];if(t.serialize&&!t.asObject&&d(c,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?l.call(u,function(e,t,r,o,i={}){const{level:s=()=>e.levels.values[t],log:a=e=>e}=i;e._serialize&&d(r,e._serialize,e.serializers,e._stdErrSerialize);const l=r.slice();let c=l[0];const u={};o&&(u.time=o),u.level=s(t,e.levels.values[t]);let g=1+(0|e._childLevel);if(g<1&&(g=1),null!==c&&"object"==typeof c){for(;g--&&"object"==typeof l[0];)Object.assign(u,l.shift());c=l.length?n(l.shift(),l):void 0}else"string"==typeof c&&(c=n(l.shift(),l));return void 0!==c&&(u.msg=c),a(u)}(this,i,c,a,t.formatters)):l.apply(u,c),t.transmit){const n=t.transmit.level||e._level,o=r.levels.values[n],l=r.levels.values[i];if(l<o)return;!function(e,t,r){const n=t.send,o=t.ts,i=t.methodLevel,s=t.methodValue,a=t.val,l=e._logEvent.bindings;d(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=s,n(i,e._logEvent,a),e._logEvent=v(l)}(this,{ts:a,methodLevel:i,methodValue:l,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:s(e._level,r)},c)}};var l}(e,t,r,i);const c=function(e){const t=[];e.bindings&&t.push(e.bindings);let r=e[l];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==c.length&&(e[i]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(c,e[i]))}function d(e,t,r,n){for(const o in e)if(n&&e[o]instanceof Error)e[o]=g.stdSerializers.err(e[o]);else if("object"==typeof e[o]&&!Array.isArray(e[o]))for(const n in e[o])t&&t.indexOf(n)>-1&&n in r&&(e[o][n]=r[n](e[o][n]))}function v(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function p(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}function m(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?w:O}function b(){return{}}function h(e){return e}function y(){}function w(){return!1}function O(){return Date.now()}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers=i,g.stdTimeFunctions=Object.assign({},{nullTime:w,epochTime:O,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),e.exports.default=g,e.exports.pino=g}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.generateCorrelationId=e.generateRequestId=e.log=e.logExtensionEvent=e.timer=e.createProdLogger=e.createDevLogger=e.forComponent=e.withContext=e.getLogger=e.createLogger=void 0;const t=r(229);Object.defineProperty(e,"createLogger",{enumerable:!0,get:function(){return t.createLogger}}),Object.defineProperty(e,"getLogger",{enumerable:!0,get:function(){return t.getLogger}}),Object.defineProperty(e,"withContext",{enumerable:!0,get:function(){return t.withContext}}),Object.defineProperty(e,"forComponent",{enumerable:!0,get:function(){return t.forComponent}}),Object.defineProperty(e,"createDevLogger",{enumerable:!0,get:function(){return t.createDevLogger}}),Object.defineProperty(e,"createProdLogger",{enumerable:!0,get:function(){return t.createProdLogger}}),Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return t.timer}}),Object.defineProperty(e,"logExtensionEvent",{enumerable:!0,get:function(){return t.logExtensionEvent}}),Object.defineProperty(e,"log",{enumerable:!0,get:function(){return t.log}}),Object.defineProperty(e,"generateRequestId",{enumerable:!0,get:function(){return t.generateRequestId}}),Object.defineProperty(e,"generateCorrelationId",{enumerable:!0,get:function(){return t.generateCorrelationId}})})(),window.DragonLogging=n})();